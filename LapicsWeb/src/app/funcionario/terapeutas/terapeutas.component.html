<body>
    <div class="row text-center">
        <div class="col-md-12">
            <h1 class="mb-3">Terapeutas</h1>
        </div>
        <div class="col-md-12">
            <p>Terapeutas cadastrados:</p>
        </div>
    </div>
    <div class="row justify-content-center">
        <div class="col-auto">
            <table class="table table-responsive text-center">
                <thead class="thead-dark">
                    <tr>
                        <th scope="col">Nome</th>
                        <th scope="col">CPF</th>
                        <th scope="col">E-mail</th>
                        <th scope="col">Senha</th>
                    </tr>
                </thead>
                <tbody *ngIf="terapeutasCount != 0">
                    <tr *ngFor="let terapeuta of terapeutas">
                        <td>{{terapeuta.nome}}</td>
                        <td>{{terapeuta.cpf}}</td>
                        <td>{{terapeuta.email}}</td>
                        <td>*******</td>
                    </tr>
                </tbody>
                <tbody *ngIf="terapeutasCount == 0">
                    <tr>
                        <td>Ainda não há terapeutas cadastrados.</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="py-2 text-center">
        <button (click)="abrirCadastrar()" type="button" class="btn btn-primary">Cadastrar Terapeuta</button>
    </div>
    <div *ngIf="cadastrar != false">
        <form>
            <div class="py-5 text-center">
                <div class="container">
                    <div class="form-group row">
                        <label for="Email" class="col-sm-2 col-form-label">Email:</label>
                        <div class="col-sm-10">
                            <input [(ngModel)]="usuario.email" name="email" type="email" class="form-control" id="Email"
                                placeholder="exemplo@hotmail.com" required #email="ngModel">

                            <div *ngIf="email.invalid && (email.dirty || email.touched)" class="alert alert-danger">

                                <div *ngIf="email.errors.required">
                                    Email é necessário
                                </div>
                                <div *ngIf="email.errors.type">
                                        É necessario inserir um email: exemplo@hotmail.com
                                </div>
                                <div *ngIf="email.errors.forbiddenName">
                                    Name cannot be Bob.
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="Senha" class="col-sm-2 col-form-label">Senha:</label>
                        <div class="col-sm-10">
                            <input [(ngModel)]="usuario.senha" name="senha" type="password" class="form-control"
                                id="Senha" placeholder="senha" required minlength="3" #senha="ngModel">
                                <div *ngIf="senha.invalid && (senha.dirty || senha.touched)" class="alert alert-danger">

                                        <div *ngIf="senha.errors.required">
                                            Senha é necessário.
                                        </div>
                                        <div *ngIf="senha.errors.minlength">
                                            A senha deve ter no mínimo 3 caracteres.
                                        </div>
                                        <div *ngIf="senha.errors.forbiddenName">
                                            A senha não pode ser 123.
                                        </div>
        
                                    </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="Nome" class="col-sm-2 col-form-label">Nome:</label>
                        <div class="col-sm-10">
                            <input [(ngModel)]="usuario.nome" name="nome" type="text" class="form-control" id="Nome"
                                placeholder="Nome completo" required minlength="3" #nome="ngModel">
                                <div *ngIf="nome.invalid && (nome.dirty || nome.touched)" class="alert alert-danger">

                                        <div *ngIf="nome.errors.required">
                                            Nome é necessário.
                                        </div>
                                        <div *ngIf="nome.errors.minlength">
                                            Nome deve ter no minimo 3 caracteres.
                                        </div>
        
                                    </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="CPF" class="col-sm-2 col-form-label">CPF:</label>
                        <div class="col-sm-10">
                            <input [(ngModel)]="usuario.cpf" name="CPF" type="text" class="form-control" id="CPF"
                                placeholder="CPF" required minlength="3" #cpf="ngModel">
                                <div *ngIf="cpf.invalid && (cpf.dirty || cpf.touched)" class="alert alert-danger">

                                        <div *ngIf="cpf.errors.required">
                                            CPF é necessário.
                                        </div>
        
                                    </div>
                        </div>
                    </div>
                    <div class="py-2">
                        <div *ngIf="email.invalid || senha.invalid || nome.invalid || cpf.invalid" >
                        <button (click)="cadastrarTerapeuta()" type="button" 
                            class="btn btn-success btn-lg" disabled=true>Cadastrar</button>
                            <div class="alert alert-danger">
                                <div>
                                    Preencha os campos
                                </div>
                            </div>
                        </div>
                        <div *ngIf="email.valid && senha.valid && nome.valid && cpf.valid" >
                                <button (click)="cadastrarTerapeuta()" type="button" 
                                    class="btn btn-success btn-lg">Criar</button>
                                    <div class="alert alert-success">
                                        <div>
                                            Campos validados :)
                                        </div>
                                    </div>
                                </div>
                    </div>
                    <div class="py-2">
                        <button (click)="cancelar()" type="button" class="btn btn-danger btn-lg">Cancelar</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</body>